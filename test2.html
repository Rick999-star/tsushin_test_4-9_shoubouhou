<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>実力テスト 第2回 | 4-5_河川法</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            scroll-behavior: smooth;
        }
        /* 正解・不正解のスタイル */
        .question-card.correct {
            border-color: #10B981; /* green-500 */
            background-color: #F0FDF4; /* green-50 */
        }
        .question-card.incorrect {
            border-color: #EF4444; /* red-500 */
            background-color: #FEF2F2; /* red-50 */
        }
        /* 採点後の正解選択肢ハイライト */
        .correct-option {
            background-color: #D1FAE5; /* green-100 */
            border-color: #10B981; /* green-500 */
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen p-6 md:p-10">

    <div class="w-full max-w-4xl mx-auto">
        <!-- ヘッダー -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-purple-800">実力テスト 第2回 (河川の利用と許可)</h1>
            <p class="text-lg text-gray-600 mt-2">全20問。最後に「採点する」ボタンを押してください。</p>
        </header>

        <!-- スコア表示欄 -->
        <div id="score-container" class="sticky top-0 z-10 mb-6 py-4 bg-white shadow-lg rounded-xl text-center text-3xl font-bold text-purple-800 hidden">
            <!-- スコアはここに表示されます -->
        </div>

        <!-- 問題リスト -->
        <main id="test-container" class="space-y-6">
            <!-- 問題はここに動的に挿入されます -->
        </main>

        <!-- 採点ボタンとナビゲーション -->
        <footer id="footer-nav" class="mt-12 text-center">
            <button id="score-button" class="w-full md:w-auto bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 px-10 rounded-lg shadow-xl text-2xl transition duration-300 transform hover:scale-105">
                採点する
            </button>
            <a href="index.html" id="home-link" class="hidden inline-block bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 mt-4">
                トップページに戻る
            </a>
        </footer>
    </div>

    <script>
        // 実力テスト第2回データ
        // 元データ（4択）から5問を記入式に変換しています (Q1, Q4, Q8, Q12, Q17)
        const test2Questions = [
            {
                "questionNumber": 1,
                "type": "fill-in",
                "question": "河川管理者（役所）の許可が必要な一番の理由は何ですか？（キーワードを2つ以上入れて回答）",
                "hint": "治水上の安全性。川は「公共の場所」です。",
                "keywords": ["洪水", "防ぐ", "公共", "場所", "安全"]
            },
            {
                "questionNumber": 2,
                "type": "multiple-choice",
                "question": "河川法第24条に定められている「土地の占用」の許可について、正しい記述はどれですか？",
                "hint": "資料の演習問題②の選択肢①の解説を思い出してください。[cite: 94-98]",
                "answerOptions": [
                    { "text": "永続的な建物の場合のみ許可が必要で、仮設の資材置場は許可が不要である。", "isCorrect": false },
                    { "text": "一時的か永続的かにかかわらず、河川区域内の土地を占用する場合は許可が必要である。", "isCorrect": true },
                    { "text": "土地の占用は自由に行うことができ、許可は一切不要である。", "isCorrect": false },
                    { "text": "市町村長の許可があれば、どの河川でも占用できる。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 3,
                "type": "multiple-choice",
                "question": "河川区域内に設置した工作物を「撤去（除却）」する場合、なぜ河川管理者の許可が必要なのですか？",
                "hint": "資料5ページの演習問題②、選択肢②の解説を見てください。[cite: 99-102]",
                "answerOptions": [
                    { "text": "撤去は法律で禁止されているから。", "isCorrect": false },
                    { "text": "撤去作業が川や堤防に悪い影響を与えないか、安全性をチェックするため。", "isCorrect": true },
                    { "text": "撤去した場所に新しい工作物を作ることを推奨するため。", "isCorrect": false },
                    { "text": "撤去にかかる費用を河川管理者が負担するため。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 4,
                "type": "fill-in",
                "question": "河川管理者の許可が「必要ない」行為の具体的な例を1つ挙げてください。",
                "hint": "「ごく普通でささいな利用」です。",
                "keywords": ["バケツ", "水", "少量", "水遊び"]
            },
            {
                "questionNumber": 5,
                "type": "multiple-choice",
                "question": "河川区域の「上空」や「地下」の利用について、正しい記述はどれですか？",
                "hint": "資料6ページの「覚えておきたいポイント」を参照してください。[cite: 117-119]",
                "answerOptions": [
                    { "text": "土地の表面ではないので、自由に利用でき、許可は不要である。", "isCorrect": false },
                    { "text": "上空も地下も河川区域の一部であり、電線や通信管の設置には許可が必要である。", "isCorrect": true },
                    { "text": "上空は許可が必要だが、地下は不要である。", "isCorrect": false },
                    { "text": "地下は許可が必要だが、上空は不要である。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 6,
                "type": "multiple-choice",
                "question": "資料の演習問題②（許可が必要な事項）の正解（誤っている選択肢）はどれですか？",
                "hint": "資料5ページに、この問題の詳しい解説があります。[cite: 94-112]",
                "answerOptions": [
                    { "text": "① 河川区域内で仮設の資材置場を設置する場合は、許可は必要ない", "isCorrect": true },
                    { "text": "② 河川区域内に設置した工作物を撤去する場合は、許可が必要である", "isCorrect": false },
                    { "text": "③ 一時的に少量の水をバケツでくみ取る場合は、許可は必要ない", "isCorrect": false },
                    { "text": "④ 電線を河川区域内の上空を通過して設置する場合は、許可が必要である", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 7,
                "type": "multiple-choice",
                "question": "河川法第26条（工作物の新築等の許可）の条文に照らして、許可が必要な行為はどれですか？",
                "hint": "資料7ページに引用されている第26条の条文を読んでください。",
                "answerOptions": [
                    { "text": "河川区域内の土地を占用すること。", "isCorrect": false },
                    { "text": "河川区域内の土地で工作物を「改築」すること。", "isCorrect": true },
                    { "text": "河川区域内の土地で水遊びをすること。", "isCorrect": false },
                    { "text": "取水口付近の土砂を排除すること。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 8,
                "type": "fill-in",
                "question": "「河川区域」とは、両岸の堤防の「内側」ですか？「外側」ですか？また、堤防自体は「含む」ますか？「含まない」ますか？",
                "hint": "水が流れる側です。資料7ページの定義を参照。",
                "keywords": ["内側", "含む"]
            },
            {
                "questionNumber": 9,
                "type": "multiple-choice",
                "question": "河川区域内の土地は、誰が所有していますか？",
                "hint": "資料7ページの「河川区域とは」の解説文を確認してください。",
                "answerOptions": [
                    { "text": "常に国（国有地）である。", "isCorrect": false },
                    { "text": "常に民有地である。", "isCorrect": false },
                    { "text": "原則として国や都道府県等だが、一部に民有地のケースもある。", "isCorrect": true },
                    { "text": "所有者は存在しない。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 10,
                "type": "multiple-choice",
                "question": "河川区域内の民有地（個人の土地）において、工作物を新築する場合、河川管理者の許可は必要ですか？",
                "hint": "土地の所有権と、公共の安全のための「規制」は別の話です。",
                "answerOptions": [
                    { "text": "必要ない。自分の土地だから。", "isCorrect": false },
                    { "text": "必要である。民有地であっても河川区域内は河川法の規制対象だから。", "isCorrect": true },
                    { "text": "土地所有者の許可だけでよい。", "isCorrect": false },
                    { "text": "河川法ではなく、建築基準法の許可だけが必要である。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 11,
                "type": "multiple-choice",
                "question": "河川法第24条は「土地の占用」の許可を定めています。では、第26条は何の許可を定めていますか？",
                "hint": "資料7ページの根拠法令の見出しを確認してください。",
                "answerOptions": [
                    { "text": "工作物の新築、改築、除却", "isCorrect": true },
                    { "text": "土砂の採取", "isCorrect": false },
                    { "text": "水利使用（水のくみ取り）", "isCorrect": false },
                    { "text": "河川区域内への立ち入り", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 12,
                "type": "fill-in",
                "question": "「保守的な作業」（例：取水口付近の土砂排除）に、河川管理者の許可は「必要」ですか？「必要ない」ですか？",
                "hint": "資料7ページの解説文に記載があります。",
                "keywords": ["必要ない", "不要"]
            },
            {
                "questionNumber": 13,
                "type": "multiple-choice",
                "question": "川の「土地」だけでなく、その「上空」も河川区域に含まれますか？",
                "hint": "電線を設置する場合の許可について思い出してください。",
                "answerOptions": [
                    { "text": "はい。含まれます。", "isCorrect": true },
                    { "text": "いいえ。含まれません。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 14,
                "type": "multiple-choice",
                "question": "資料6ページの「覚えておきたいポイント」によれば、許可が「いらない」ケースはどのような場合ですか？",
                "hint": "「例外」として挙げられているケースです。",
                "answerOptions": [
                    { "text": "一時的な資材置場を設置する場合。", "isCorrect": false },
                    { "text": "地下に管を設置する場合。", "isCorrect": false },
                    { "text": "バケツで水を汲むなど、ごく普通でささいな利用の場合。", "isCorrect": true },
                    { "text": "永続的な建物を設置する場合。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 15,
                "type": "multiple-choice",
                "question": "河川区域内で「土地の占用」と「工作物の新築」の両方を行う場合、どのような許可が必要ですか？",
                "hint": "資料7ページには、第24条と第26条という2つの異なる許可が記載されています。[cite: 136-139]",
                "answerOptions": [
                    { "text": "土地の占用の許可（第24条）だけでよい。", "isCorrect": false },
                    { "text": "工作物の新築の許可（第26条）だけでよい。", "isCorrect": false },
                    { "text": "第24条（占用）と第26条（工作物新築）の両方の許可が必要になる。", "isCorrect": true },
                    { "text": "どちらも許可は必要ない。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 16,
                "type": "multiple-choice",
                "question": "資料7ページの写真に写っているような、河川を横断する管（通信線路など）は、河川法上どのような扱いを受けますか？",
                "hint": "演習問題②の選択肢④（電線）と同じ考え方です。[cite: 109-112]",
                "answerOptions": [
                    { "text": "許可が不要な「保守的な作業」にあたる。", "isCorrect": false },
                    { "text": "許可が不要な「軽微な利用」にあたる。", "isCorrect": false },
                    { "text": "「工作物の新築」と「空間の占用」にあたり、許可が必要である。", "isCorrect": true },
                    { "text": "「河川管理施設」にあたり、河川管理者自身が設置するものである。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 17,
                "type": "fill-in",
                "question": "河川区域内で、工事のために「仮設の」資材置場を設置します。この場合、河川管理者の許可は「必要」ですか？「必要ない」ですか？",
                "hint": "仮設であっても土地の「占用」にあたります。",
                "keywords": ["必要"]
            },
            {
                "questionNumber": 18,
                "type": "multiple-choice",
                "question": "河川法第26条の「工作物」の「除却」について、正しい説明はどれですか？",
                "hint": "演習問題②の選択肢②[cite: 99-102]と、資料7ページの条文を確認してください。",
                "answerOptions": [
                    { "text": "工作物を「除却（撤去）」する場合には、許可は必要ない。", "isCorrect": false },
                    { "text": "工作物を「除却（撤去）」する場合にも、新築や改築と同様に許可が必要である。", "isCorrect": true },
                    { "text": "「除却」とは、新しく建てることである。", "isCorrect": false },
                    { "text": "「除却」の許可は、国土交通大臣にのみ申請する。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 19,
                "type": "multiple-choice",
                "question": "バケツで水を汲む行為に許可が不要な理由（「社会通念上当たり前」）は、水利使用の許可が何を目的としているかを反映しています。この目的とは何だと考えられますか？",
                "hint": "なぜ「少量」なら許可が不要なのか、を考えてみてください。",
                "answerOptions": [
                    { "text": "川の水を汚させないため。", "isCorrect": false },
                    { "text": "大量の水が取水されることで、他の利用者や河川環境に影響が出るのを防ぐため。", "isCorrect": true },
                    { "text": "川の水をすべて有料にするため。", "isCorrect": false },
                    { "text": "川で溺れる事故を防ぐため。", "isCorrect": false }
                ]
            },
            {
                "questionNumber": 20,
                "type": "multiple-choice",
                "question": "河川区域で許可なく行うことが「できる」行為は、次のうちどれですか？",
                "hint": "資料で「例外」として挙げられている、許可が不要なケースを選んでください。",
                "answerOptions": [
                    { "text": "河川を横断する通信線（管）を設置する。", "isCorrect": false },
                    { "text": "河川敷に永続的な倉庫（工作物）を新築する。", "isCorrect": false },
                    { "text": "河川から少量の水をバケツでくみ取り、持ち帰る。", "isCorrect": true },
                    { "text": "河川区域内に設置した古い電柱を「除却（撤去）」する。", "isCorrect": false }
                ]
            }
        ];


        // HTMLを生成してコンテナに挿入
        const container = document.getElementById('test-container');
        test2Questions.forEach((q, index) => {
            const questionId = `q${index}`;
            let contentHtml = '';

            if (q.type === 'multiple-choice') {
                contentHtml = `
                    <div class="space-y-3" role="radiogroup" aria-labelledby="${questionId}-label">
                        ${q.answerOptions.map((opt, i) => `
                            <label for="${questionId}-opt${i}" class="option-label block w-full text-left p-4 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 transition duration-150 cursor-pointer">
                                <input type="radio" name="${questionId}" id="${questionId}-opt${i}" value="${opt.text}" class="mr-3" data-correct="${opt.isCorrect}">
                                ${opt.text}
                            </label>
                        `).join('')}
                    </div>
                `;
            } else if (q.type === 'fill-in') {
                contentHtml = `
                    <div>
                        <input type="text" id="${questionId}-input" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500" placeholder="解答を入力してください">
                        <div class="correct-answer-text hidden text-sm font-bold text-green-700 mt-2">
                            正解キーワード: ${q.keywords.join('、 ')}
                        </div>
                    </div>
                `;
            }

            const cardHtml = `
                <div id="${questionId}" class="question-card bg-white shadow-lg rounded-xl overflow-hidden border-2 border-transparent">
                    <!-- 問題ヘッダー -->
                    <div class="p-6 bg-gray-50 border-b border-gray-200">
                        <h2 id="${questionId}-label" class="text-xl font-bold text-purple-900">
                            <span class="text-2xl font-black mr-2">${index + 1}.</span>
                            ${q.question}
                        </h2>
                        ${q.hint ? `<p class="text-sm text-gray-500 mt-2 ml-8">ヒント: ${q.hint}</p>` : ''}
                    </div>
                    
                    <!-- 解答欄 -->
                    <div class="p-6">
                        ${contentHtml}
                    </div>
                </div>
            `;
            container.innerHTML += cardHtml;
        });

        // 採点機能
        const scoreButton = document.getElementById('score-button');
        scoreButton.addEventListener('click', () => {
            let totalScore = 0;
            const scoreContainer = document.getElementById('score-container');
            
            test2Questions.forEach((q, index) => {
                const questionId = `q${index}`;
                const card = document.getElementById(questionId);
                let isCorrect = false;

                if (q.type === 'multiple-choice') {
                    const selected = container.querySelector(`input[name="${questionId}"]:checked`);
                    if (selected) {
                        if (selected.dataset.correct === 'true') {
                            isCorrect = true;
                        }
                    }
                    // 採点後に正解を表示
                    q.answerOptions.forEach((opt, i) => {
                        const label = container.querySelector(`label[for="${questionId}-opt${i}"]`);
                        if (opt.isCorrect) {
                            label.classList.add('correct-option');
                        }
                    });

                } else if (q.type === 'fill-in') {
                    const input = container.querySelector(`#${questionId}-input`);
                    const userAnswer = input.value.trim();
                    if (userAnswer) {
                        // キーワードのいずれかを含んでいれば正解
                        isCorrect = q.keywords.some(keyword => userAnswer.includes(keyword));
                    }
                    // 正解キーワードを表示
                    container.querySelector(`#${questionId}-input + .correct-answer-text`).classList.remove('hidden');
                    // 入力欄を無効化
                    input.disabled = true;
                }

                // スコア加算とスタイル適用
                if (isCorrect) {
                    totalScore++;
                    card.classList.add('correct');
                } else {
                    card.classList.add('incorrect');
                }
            });

            // スコア表示
            scoreContainer.innerHTML = `あなたのスコア: ${totalScore} / ${test2Questions.length} 点`;
            scoreContainer.classList.remove('hidden');
            window.scrollTo(0, 0);

            // ボタンの表示切替
            scoreButton.classList.add('hidden');
            document.getElementById('home-link').classList.remove('hidden');

            // すべてのラジオボタンを無効化
            container.querySelectorAll('input[type="radio"]').forEach(radio => radio.disabled = true);
        });

    </script>
</body>
</html>
